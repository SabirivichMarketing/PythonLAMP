@echo off
chcp 65001 > nul
setlocal enabledelayedexpansion

set tempfile=%temp%\file_contents_%random%.txt
type nul > "%tempfile%"

echo üìÅ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫...
tree /f > "%temp%\_tree.txt"

echo üìù –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤...
set /a filecount=0

:: –ò—Å–∫–ª—é—á–∞–µ–º –ø–∞–ø–∫—É .git –∏ —Ñ–∞–π–ª—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
for /f "delims=" %%f in ('dir /s /b /a-d ^| findstr /v /i "\\\.git\\ \.jpg$ \.jpeg$ \.png$ \.gif$ \.bmp$ \.ico$ \.svg$ \.webp$ \.pdf$"') do (
    set /a filecount+=1
    echo –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: !filecount! > "%temp%\_counter.txt"
    
    echo [%%~nxf]: >> "%tempfile%"
    
    :: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª —Ç–µ–∫—Å—Ç–æ–≤—ã–º
    findstr /m ".*" "%%f" >nul 2>&1
    if !errorlevel! equ 0 (
        type "%%f" 2>nul >> "%tempfile%"
    ) else (
        echo [–ë–ò–ù–ê–†–ù–´–ô –§–ê–ô–õ - –°–û–î–ï–†–ñ–ò–ú–û–ï –ù–ï –û–¢–û–ë–†–ê–ñ–ê–ï–¢–°–Ø] >> "%tempfile%"
    )
    
    echo. >> "%tempfile%"
    echo ---–∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞--- >> "%tempfile%"
    echo. >> "%tempfile%"
)

:: –î–æ–±–∞–≤–ª—è–µ–º –¥–µ—Ä–µ–≤–æ –ø–∞–ø–æ–∫ –≤ –Ω–∞—á–∞–ª–æ
echo ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê > "%temp%\_final.txt"
echo üå≥ –°–¢–†–£–ö–¢–£–†–ê –ü–ê–ü–û–ö –ò –§–ê–ô–õ–û–í >> "%temp%\_final.txt"
echo ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê >> "%temp%\_final.txt"
type "%temp%\_tree.txt" >> "%temp%\_final.txt"
echo. >> "%temp%\_final.txt"
echo ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê >> "%temp%\_final.txt"
echo üìÑ –°–û–î–ï–†–ñ–ò–ú–û–ï –§–ê–ô–õ–û–í >> "%temp%\_final.txt"
echo ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê >> "%temp%\_final.txt"
type "%tempfile%" >> "%temp%\_final.txt"

:: –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
clip < "%temp%\_final.txt"

:: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
cls
echo ========================================
echo ‚úÖ –ì–û–¢–û–í–û!
echo ========================================
echo –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: !filecount!
echo –î–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
echo.
echo üìã –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä (Ctrl+V)
echo ========================================

:: –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
del "%tempfile%" 2>nul
del "%temp%\_tree.txt" 2>nul
del "%temp%\_final.txt" 2>nul
del "%temp%\_counter.txt" 2>nul

pause